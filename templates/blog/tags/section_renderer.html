{% load blog_tags %}

<div class="blog-section" id="section-{{ section.order }}">
    {% if section.section_type == 'heading' %}
        {% if section.heading_level == 2 %}
            <h2>{{ section.heading }}</h2>
        {% elif section.heading_level == 3 %}
            <h3>{{ section.heading }}</h3>
        {% else %}
            <h4>{{ section.heading }}</h4>
        {% endif %}
        {% if section.content %}
            <p>{{ section.content }}</p>
        {% endif %}

    {% elif section.section_type == 'text' %}
        {% if section.heading %}
            <h3>{{ section.heading }}</h3>
        {% endif %}
        <p>{{ section.content|markdown }}</p>

    {% elif section.section_type == 'image' %}
        {% if section.image %}
            <img src="{{ section.image.url }}" alt="{{ section.image_caption|default:section.heading }}" class="w-full h-auto rounded-2xl my-8">
            {% if section.image_caption %}
                <p class="text-center text-sm text-gray-500 -mt-4 mb-8">{{ section.image_caption }}</p>
            {% endif %}
        {% endif %}

    {% elif section.section_type == 'quote' %}
        <blockquote>
            {{ section.content|markdown }}
        </blockquote>

    {% elif section.section_type == 'code' %}
        {% if section.heading %}
            <h3>{{ section.heading }}</h3>
        {% endif %}
        <pre><code class="language-{{ section.code_language|default:'python' }}">{{ section.content }}</code></pre>

    {% elif section.section_type == 'list' %}
        {% if section.heading %}
            <h3>{{ section.heading }}</h3>
        {% endif %}
        <ul>
            {% for item in section.list_items %}
                <li>{{ item }}</li>
            {% endfor %}
        </ul>

    {% elif section.section_type == 'video' %}
        {% if section.heading %}
            <h3>{{ section.heading }}</h3>
        {% endif %}
        {% if section.video_url %}
            <div class="video-container my-8">
                {% if 'youtube.com' in section.video_url or 'youtu.be' in section.video_url %}
                    <iframe width="100%" height="400" src="{{ section.video_url }}" frameborder="0" allowfullscreen></iframe>
                {% else %}
                    <video width="100%" controls>
                        <source src="{{ section.video_url }}" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                {% endif %}
            </div>
        {% endif %}

    {% elif section.section_type == 'custom' %}
        {{ section.content|safe }}

    {% endif %}
</div>
